<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle">
</p-confirmDialog>
<p-toast />
<div class="home">
  <div class="nav"></div>
  <div class="header-name">
    <h1>
      {{ vendor.name | titlecase }}
      <span *ngIf="!vendor.isApproved" class="status-label pending">
        PENDING
      </span>
    </h1>
    <div class="buttons">
      <button
        pButton
        id="edit-profile-button"
        type="button"
        label="Edit Profile"
        icon="pi pi-pencil"
        [rounded]="true"
        [outlined]="true"
        (click)="navigateToEdit(vendor.id)"
      ></button>
      @if(!vendor.isApproved) {
      <button
        pButton
        id="approve-vendor-button"
        type="button"
        label="Approve Vendor"
        icon="pi pi-check"
        class="p-button-primary approve-btn"
        (click)="confirmApproval()"
      ></button>
      }
    </div>
  </div>
  <div class="basic-info">
    <h5>Basic Info</h5>
  </div>
  <div class="content">
    <div class="profile-info">
      <h5>Profile Info</h5>
      <div class="info-row">
        <div class="info-item">
          <small>Address</small>
          <p>
            {{ vendor.country + ',' + vendor.stateProvinceRegion }}
          </p>
        </div>
      </div>
      <div class="info-row vendor-email">
        <div class="info-item">
          <small>Email</small>
          <p>{{ vendor.email }}</p>
        </div>
        <div class="info-item">
          <small>Phone</small>
          <p>{{ vendor.phone }}</p>
        </div>
        <div class="info-item vendor-website">
          <small>Website</small>
          <p>
            <a [attr.href]="vendor.website" target="_blank">
              {{ vendor.website | truncate : 20 }}
            </a>
          </p>
        </div>
        <div class="info-item market">
          <small>Market</small><br />
          <ng-container>
            {{ (vendor.markets | listItems :1).transformedList }}
            <span
              *ngIf="vendor.markets.length > 1;"
              (mouseenter)="op.toggle($event)"
              (mouseleave)="op.hide()"
              [style.cursor]="'pointer'"
            >
                <span class="surface-border">+{{ (vendor.markets|listItems).length}}</span>
            </span>
            <ng-template #simpleDisplay>
              <span>{{ vendor.markets | listItems }}</span>
            </ng-template>
            <p-overlayPanel #op [showCloseIcon]="false">
              <ng-template pTemplate="content">
                <ul>
                  <li *ngFor="let market of vendor.markets">
                    {{ market.name }}
                  </li>
                </ul>
              </ng-template>
            </p-overlayPanel>
          </ng-container>
        </div> 
        <div class="info-item service-category">
          <small>Service Category</small>
          <p>{{ vendor.service.name }}</p>
        </div>
      </div>
    </div>
  </div>
</div>