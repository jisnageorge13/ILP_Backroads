<div class="header"></div>
<p-toast />
<form
  class="add-vendor-page"
  [formGroup]="addVendorForm"
  (ngSubmit)="submitVendor()"
>
  <div class="form-heading">
    @if(isEdit) {
    <h2>Edit vendor</h2>
    } @else {
    <h2>New vendor</h2>
    }
  </div>
  <div class="form-body">
    <div>
      <label for="vendorName" class="vendorName"
        >Vendor Name<span class="requiredSymbol">*</span></label
      >
      <input
        pInputText
        id="vendorName"
        type="text"
        class="vendorNameInput"
        formControlName="vendorName"
        placeholder="Enter Vendor Name"
        required
        [class.invalidInput]="
          addVendorForm.get('vendorName')?.invalid &&
          addVendorForm.get('vendorName')?.touched
        "
      />
      <app-error-message
        [control]="addVendorForm.get('vendorName')"
        message="Name Required"
      ></app-error-message>
    </div>
    <div class="state-country">
      <div class="vendor-place">
        <label id="state" class="selectedCity">State</label>
        <div class="card flex justify-content-center">
          <p-dropdown
            formControlName="state"
            [options]="states"
            placeholder="Select State"
            id="state"
          />
        </div>
      </div>
      <div class="vendor-place">
        <label id="country" class="selectedCity"
          >Country<span class="requiredSymbol">*</span></label
        >
        <div class="card flex justify-content-center">
          <p-dropdown
            formControlName="country"
            [options]="countries"
            placeholder="Select Country"
            id="country"
            [ngClass]="{
              'ng-dirty ng-invalid':
                addVendorForm.get('country')?.invalid &&
                addVendorForm.get('country')?.touched &&
                addVendorForm.get('country')?.hasError('required')
            }"
          />
        </div>
        <app-error-message
          [control]="addVendorForm.get('country')"
          message="Country Required"
        ></app-error-message>
      </div>
    </div>
    <div class="state-country">
      <div class="market-name">
        <label for="markets" class="marketlabel">
          Markets<span class="requiredSymbol">*</span>
        </label>
        <div class="card flex justify-content-center">
          <p-multiSelect
            formControlName="markets"
            [options]="markets"
            optionLabel="name"
            showHeader="false"
            optionValue="id"
            placeholder="Select Markets"
            id="markets"
            [ngClass]="{
              'ng-dirty ng-invalid':
                addVendorForm.get('markets')?.invalid &&
                addVendorForm.get('markets')?.touched &&
                addVendorForm.get('markets')?.hasError('required')
            }"
          >
          </p-multiSelect>
        </div>
        <app-error-message
          [control]="addVendorForm.get('markets')"
          message="Market is Required"
        ></app-error-message>
      </div>
      <div class="service-category">
        <label for="service">
          Service Category<span class="requiredSymbol">*</span>
        </label>
        <div class="card flex justify-content-center">
          <p-dropdown
            formControlName="service"
            [options]="services"
            optionLabel="name"
            optionValue="id"
            placeholder="Select Service"
            id="service"
            [scrollHeight]="'9.375rem'"
            [ngClass]="{
              'ng-dirty ng-invalid':
                addVendorForm.get('service')?.invalid &&
                addVendorForm.get('service')?.touched &&
                addVendorForm.get('service')?.hasError('required')
            }"
          ></p-dropdown>
        </div>
        <app-error-message
          [control]="addVendorForm.get('service')"
          message="Service is Requires"
        ></app-error-message>
      </div>
    </div>
    <div class="contact-info">
      <p>General Contact Info</p>
      <div class="contact">
        <div class="contact-options">
          <label for="email">Email<span class="requiredSymbol">*</span></label>
          <input
            pInputText
            type="email"
            id="email"
            class="email"
            placeholder="Enter Email"
            formControlName="email"
            [class.invalidInput]="
              addVendorForm.get('email')?.invalid &&
              addVendorForm.get('email')?.touched
            "
            required
          />
          <app-error-message
            [control]="addVendorForm.get('email')"
            message="Inavlid Email Address"
          ></app-error-message>
        </div>
        <div class="phone-website">
          <div class="contact-options">
            <label for="phone">
              Phone<span class="requiredSymbol">*</span></label
            >
            <p-inputGroup>
              <input
                formControlName="phone"
                pInputText
                type="string"
                placeholder="Enter Number"
                [class.invalidInput]="
                  addVendorForm.get('phone')?.invalid &&
                  addVendorForm.get('phone')?.touched
                "
              />
            </p-inputGroup>
            <app-error-message
              [control]="addVendorForm.get('phone')"
              message="Invalid Phone"
            ></app-error-message>
          </div>
          <div class="contact-options">
            <label for="website">Website(Optional)</label>
            <input
              pInputText
              type="text"
              id="website"
              placeholder="Enter Website"
              formControlName="website"
            />
            <app-error-message
              [control]="addVendorForm.get('website')"
              message="Inavlid Website URL"
            ></app-error-message>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card submit-cancel">
    <p-button
      type="submit"
      id="submit-btn"
      label="Submit"
      [disabled]="addVendorForm.invalid"
      class="submit-btn"
    />
    <button
      id="cancel-btn"
      type="button"
      (click)="
        confirmDialog.showConfirmDialog(
          'Are you sure you want to cancel the changes?'
        )"
      class="cancel-btn"
    >
      Cancel
    </button>
    <app-confirm-dialog #confirmDialog (onConfirm)="handleConfirm()">
    </app-confirm-dialog>
  </div>
</form>
